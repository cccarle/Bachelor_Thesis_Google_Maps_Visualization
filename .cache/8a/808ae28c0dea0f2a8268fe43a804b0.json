{"id":"ZUSQ","dependencies":[{"name":"/Users/joel/Documents/WPYearThree/2dv50e_visualization/package.json","includedInParent":true,"mtime":1589048804801},{"name":"./convec_hull","loc":{"line":1,"column":27},"parent":"/Users/joel/Documents/WPYearThree/2dv50e_visualization/calculatePolygons.js","resolved":"/Users/joel/Documents/WPYearThree/2dv50e_visualization/convec_hull.js"}],"generated":{"js":"var t=require(\"./convec_hull\");function n(t){var n={};return t.forEach(function(t){var r=new Date(t.timestamp).getHours(),a=r.toString()+\":00-\"+r.toString()+\":59\";n[a]||(n[a]=[]),n[a].push(t)}),n}function r(t,n){var r=t.lat,a=t.lng,o=n.lat,u=n.lng,i=o*Math.PI/180-r*Math.PI/180,c=u*Math.PI/180-a*Math.PI/180,h=Math.sin(i/2)*Math.sin(i/2)+Math.cos(r*Math.PI/180)*Math.cos(o*Math.PI/180)*Math.sin(c/2)*Math.sin(c/2);return 1e3*(6378.137*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))))}function a(t,n){var r=-1;return n.forEach(function(n,a){n.includes(t)&&(r=a)}),r}function o(t,n){for(var o=[],u=0;u<t.length;u++){var i=t,c=a(i[u],o);c<0&&(o.push([i[u]]),c=o.length-1);for(var h=0;h<t.length;h++){if(u!==h)if(r(i[u].location,i[h].location)<=n){var e=a(i[h],o);if(e<0)o[c].push(i[h]);else if(e!==c){var f=o[c].concat(o[e]);o.splice(c,1),o.splice(e,1),o.push(f),e=c=o.length-1}}}}return o}function u(t){var n=[];return t.forEach(function(t){n.push({x:t.location.lat,y:t.location.lng})}),n}function i(t){var n=[];return t.forEach(function(t){n.push({lat:t.x,lng:t.y})}),n}function c(n){var r=u(n);return i(t.makeHull(r))}function h(t){var n=[];return t.forEach(function(t){n.push(c(t))}),n}function e(t,n){return h(o(JSON.parse(JSON.stringify(t)),n))}function f(t,r){var a=n(t),o={};for(var u in a)o[u]=e(a[u],r);return o}module.exports=f;"},"sourceMaps":{"js":{"mappings":[{"source":"calculatePolygons.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"calculatePolygons.js","name":"convexhull","original":{"line":1,"column":6},"generated":{"line":1,"column":4}},{"source":"calculatePolygons.js","name":"require","original":{"line":1,"column":19},"generated":{"line":1,"column":6}},{"source":"calculatePolygons.js","original":{"line":1,"column":27},"generated":{"line":1,"column":14}},{"source":"calculatePolygons.js","original":{"line":4,"column":0},"generated":{"line":1,"column":31}},{"source":"calculatePolygons.js","name":"splitByTimestamp","original":{"line":4,"column":9},"generated":{"line":1,"column":40}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":4,"column":26},"generated":{"line":1,"column":42}},{"source":"calculatePolygons.js","name":"coordinatesByTime","original":{"line":5,"column":8},"generated":{"line":1,"column":45}},{"source":"calculatePolygons.js","name":"coordinatesByTime","original":{"line":5,"column":8},"generated":{"line":1,"column":49}},{"source":"calculatePolygons.js","original":{"line":5,"column":28},"generated":{"line":1,"column":51}},{"source":"calculatePolygons.js","name":"coordinatesByTime","original":{"line":15,"column":11},"generated":{"line":1,"column":54}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":6,"column":4},"generated":{"line":1,"column":61}},{"source":"calculatePolygons.js","name":"forEach","original":{"line":6,"column":16},"generated":{"line":1,"column":63}},{"source":"calculatePolygons.js","original":{"line":6,"column":24},"generated":{"line":1,"column":71}},{"source":"calculatePolygons.js","name":"c","original":{"line":6,"column":24},"generated":{"line":1,"column":80}},{"source":"calculatePolygons.js","name":"time","original":{"line":7,"column":12},"generated":{"line":1,"column":83}},{"source":"calculatePolygons.js","name":"h","original":{"line":8,"column":12},"generated":{"line":1,"column":87}},{"source":"calculatePolygons.js","original":{"line":7,"column":19},"generated":{"line":1,"column":89}},{"source":"calculatePolygons.js","name":"Date","original":{"line":7,"column":23},"generated":{"line":1,"column":93}},{"source":"calculatePolygons.js","name":"c","original":{"line":7,"column":28},"generated":{"line":1,"column":98}},{"source":"calculatePolygons.js","name":"timestamp","original":{"line":7,"column":30},"generated":{"line":1,"column":100}},{"source":"calculatePolygons.js","name":"getHours","original":{"line":8,"column":21},"generated":{"line":1,"column":111}},{"source":"calculatePolygons.js","name":"timeName","original":{"line":9,"column":12},"generated":{"line":1,"column":122}},{"source":"calculatePolygons.js","name":"h","original":{"line":9,"column":23},"generated":{"line":1,"column":124}},{"source":"calculatePolygons.js","name":"toString","original":{"line":9,"column":25},"generated":{"line":1,"column":126}},{"source":"calculatePolygons.js","original":{"line":9,"column":38},"generated":{"line":1,"column":137}},{"source":"calculatePolygons.js","name":"h","original":{"line":9,"column":47},"generated":{"line":1,"column":144}},{"source":"calculatePolygons.js","name":"toString","original":{"line":9,"column":49},"generated":{"line":1,"column":146}},{"source":"calculatePolygons.js","original":{"line":9,"column":62},"generated":{"line":1,"column":157}},{"source":"calculatePolygons.js","name":"coordinatesByTime","original":{"line":10,"column":13},"generated":{"line":1,"column":163}},{"source":"calculatePolygons.js","name":"timeName","original":{"line":10,"column":31},"generated":{"line":1,"column":165}},{"source":"calculatePolygons.js","name":"coordinatesByTime","original":{"line":11,"column":12},"generated":{"line":1,"column":170}},{"source":"calculatePolygons.js","name":"timeName","original":{"line":11,"column":30},"generated":{"line":1,"column":172}},{"source":"calculatePolygons.js","original":{"line":11,"column":42},"generated":{"line":1,"column":175}},{"source":"calculatePolygons.js","name":"coordinatesByTime","original":{"line":13,"column":8},"generated":{"line":1,"column":179}},{"source":"calculatePolygons.js","name":"timeName","original":{"line":13,"column":26},"generated":{"line":1,"column":181}},{"source":"calculatePolygons.js","name":"push","original":{"line":13,"column":36},"generated":{"line":1,"column":184}},{"source":"calculatePolygons.js","name":"c","original":{"line":13,"column":41},"generated":{"line":1,"column":189}},{"source":"calculatePolygons.js","name":"coordinatesByTime","original":{"line":15,"column":11},"generated":{"line":1,"column":194}},{"source":"calculatePolygons.js","original":{"line":18,"column":0},"generated":{"line":1,"column":196}},{"source":"calculatePolygons.js","name":"measure","original":{"line":18,"column":9},"generated":{"line":1,"column":205}},{"source":"calculatePolygons.js","name":"coord1","original":{"line":18,"column":17},"generated":{"line":1,"column":207}},{"source":"calculatePolygons.js","name":"coord2","original":{"line":18,"column":25},"generated":{"line":1,"column":209}},{"source":"calculatePolygons.js","name":"lat1","original":{"line":19,"column":8},"generated":{"line":1,"column":212}},{"source":"calculatePolygons.js","name":"lat1","original":{"line":19,"column":8},"generated":{"line":1,"column":216}},{"source":"calculatePolygons.js","name":"coord1","original":{"line":19,"column":15},"generated":{"line":1,"column":218}},{"source":"calculatePolygons.js","name":"lat","original":{"line":19,"column":22},"generated":{"line":1,"column":220}},{"source":"calculatePolygons.js","name":"lon1","original":{"line":20,"column":8},"generated":{"line":1,"column":224}},{"source":"calculatePolygons.js","name":"coord1","original":{"line":20,"column":15},"generated":{"line":1,"column":226}},{"source":"calculatePolygons.js","name":"lng","original":{"line":20,"column":22},"generated":{"line":1,"column":228}},{"source":"calculatePolygons.js","name":"lat2","original":{"line":21,"column":8},"generated":{"line":1,"column":232}},{"source":"calculatePolygons.js","name":"coord2","original":{"line":21,"column":15},"generated":{"line":1,"column":234}},{"source":"calculatePolygons.js","name":"lat","original":{"line":21,"column":22},"generated":{"line":1,"column":236}},{"source":"calculatePolygons.js","name":"lon2","original":{"line":22,"column":8},"generated":{"line":1,"column":240}},{"source":"calculatePolygons.js","name":"coord2","original":{"line":22,"column":15},"generated":{"line":1,"column":242}},{"source":"calculatePolygons.js","name":"lng","original":{"line":22,"column":22},"generated":{"line":1,"column":244}},{"source":"calculatePolygons.js","name":"dLat","original":{"line":25,"column":8},"generated":{"line":1,"column":248}},{"source":"calculatePolygons.js","name":"lat2","original":{"line":25,"column":15},"generated":{"line":1,"column":250}},{"source":"calculatePolygons.js","name":"Math","original":{"line":25,"column":22},"generated":{"line":1,"column":252}},{"source":"calculatePolygons.js","name":"PI","original":{"line":25,"column":27},"generated":{"line":1,"column":257}},{"source":"calculatePolygons.js","original":{"line":25,"column":32},"generated":{"line":1,"column":260}},{"source":"calculatePolygons.js","name":"lat1","original":{"line":25,"column":38},"generated":{"line":1,"column":264}},{"source":"calculatePolygons.js","name":"Math","original":{"line":25,"column":45},"generated":{"line":1,"column":266}},{"source":"calculatePolygons.js","name":"PI","original":{"line":25,"column":50},"generated":{"line":1,"column":271}},{"source":"calculatePolygons.js","original":{"line":25,"column":55},"generated":{"line":1,"column":274}},{"source":"calculatePolygons.js","name":"dLon","original":{"line":26,"column":8},"generated":{"line":1,"column":278}},{"source":"calculatePolygons.js","name":"lon2","original":{"line":26,"column":15},"generated":{"line":1,"column":280}},{"source":"calculatePolygons.js","name":"Math","original":{"line":26,"column":22},"generated":{"line":1,"column":282}},{"source":"calculatePolygons.js","name":"PI","original":{"line":26,"column":27},"generated":{"line":1,"column":287}},{"source":"calculatePolygons.js","original":{"line":26,"column":32},"generated":{"line":1,"column":290}},{"source":"calculatePolygons.js","name":"lon1","original":{"line":26,"column":38},"generated":{"line":1,"column":294}},{"source":"calculatePolygons.js","name":"Math","original":{"line":26,"column":45},"generated":{"line":1,"column":296}},{"source":"calculatePolygons.js","name":"PI","original":{"line":26,"column":50},"generated":{"line":1,"column":301}},{"source":"calculatePolygons.js","original":{"line":26,"column":55},"generated":{"line":1,"column":304}},{"source":"calculatePolygons.js","name":"a","original":{"line":27,"column":8},"generated":{"line":1,"column":308}},{"source":"calculatePolygons.js","name":"Math","original":{"line":27,"column":12},"generated":{"line":1,"column":310}},{"source":"calculatePolygons.js","name":"sin","original":{"line":27,"column":17},"generated":{"line":1,"column":315}},{"source":"calculatePolygons.js","name":"dLat","original":{"line":27,"column":21},"generated":{"line":1,"column":319}},{"source":"calculatePolygons.js","original":{"line":27,"column":28},"generated":{"line":1,"column":321}},{"source":"calculatePolygons.js","name":"Math","original":{"line":27,"column":33},"generated":{"line":1,"column":324}},{"source":"calculatePolygons.js","name":"sin","original":{"line":27,"column":38},"generated":{"line":1,"column":329}},{"source":"calculatePolygons.js","name":"dLat","original":{"line":27,"column":42},"generated":{"line":1,"column":333}},{"source":"calculatePolygons.js","original":{"line":27,"column":49},"generated":{"line":1,"column":335}},{"source":"calculatePolygons.js","name":"Math","original":{"line":28,"column":8},"generated":{"line":1,"column":338}},{"source":"calculatePolygons.js","name":"cos","original":{"line":28,"column":13},"generated":{"line":1,"column":343}},{"source":"calculatePolygons.js","name":"lat1","original":{"line":28,"column":17},"generated":{"line":1,"column":347}},{"source":"calculatePolygons.js","name":"Math","original":{"line":28,"column":24},"generated":{"line":1,"column":349}},{"source":"calculatePolygons.js","name":"PI","original":{"line":28,"column":29},"generated":{"line":1,"column":354}},{"source":"calculatePolygons.js","original":{"line":28,"column":34},"generated":{"line":1,"column":357}},{"source":"calculatePolygons.js","name":"Math","original":{"line":28,"column":41},"generated":{"line":1,"column":362}},{"source":"calculatePolygons.js","name":"cos","original":{"line":28,"column":46},"generated":{"line":1,"column":367}},{"source":"calculatePolygons.js","name":"lat2","original":{"line":28,"column":50},"generated":{"line":1,"column":371}},{"source":"calculatePolygons.js","name":"Math","original":{"line":28,"column":57},"generated":{"line":1,"column":373}},{"source":"calculatePolygons.js","name":"PI","original":{"line":28,"column":62},"generated":{"line":1,"column":378}},{"source":"calculatePolygons.js","original":{"line":28,"column":67},"generated":{"line":1,"column":381}},{"source":"calculatePolygons.js","name":"Math","original":{"line":29,"column":8},"generated":{"line":1,"column":386}},{"source":"calculatePolygons.js","name":"sin","original":{"line":29,"column":13},"generated":{"line":1,"column":391}},{"source":"calculatePolygons.js","name":"dLon","original":{"line":29,"column":17},"generated":{"line":1,"column":395}},{"source":"calculatePolygons.js","original":{"line":29,"column":24},"generated":{"line":1,"column":397}},{"source":"calculatePolygons.js","name":"Math","original":{"line":29,"column":29},"generated":{"line":1,"column":400}},{"source":"calculatePolygons.js","name":"sin","original":{"line":29,"column":34},"generated":{"line":1,"column":405}},{"source":"calculatePolygons.js","name":"dLon","original":{"line":29,"column":38},"generated":{"line":1,"column":409}},{"source":"calculatePolygons.js","original":{"line":29,"column":45},"generated":{"line":1,"column":411}},{"source":"calculatePolygons.js","name":"d","original":{"line":32,"column":11},"generated":{"line":1,"column":414}},{"source":"calculatePolygons.js","original":{"line":32,"column":15},"generated":{"line":1,"column":421}},{"source":"calculatePolygons.js","original":{"line":24,"column":12},"generated":{"line":1,"column":426}},{"source":"calculatePolygons.js","original":{"line":30,"column":12},"generated":{"line":1,"column":436}},{"source":"calculatePolygons.js","name":"Math","original":{"line":30,"column":16},"generated":{"line":1,"column":438}},{"source":"calculatePolygons.js","name":"atan2","original":{"line":30,"column":21},"generated":{"line":1,"column":443}},{"source":"calculatePolygons.js","name":"Math","original":{"line":30,"column":27},"generated":{"line":1,"column":449}},{"source":"calculatePolygons.js","name":"sqrt","original":{"line":30,"column":32},"generated":{"line":1,"column":454}},{"source":"calculatePolygons.js","name":"a","original":{"line":30,"column":37},"generated":{"line":1,"column":459}},{"source":"calculatePolygons.js","name":"Math","original":{"line":30,"column":41},"generated":{"line":1,"column":462}},{"source":"calculatePolygons.js","name":"sqrt","original":{"line":30,"column":46},"generated":{"line":1,"column":467}},{"source":"calculatePolygons.js","original":{"line":30,"column":51},"generated":{"line":1,"column":472}},{"source":"calculatePolygons.js","name":"a","original":{"line":30,"column":55},"generated":{"line":1,"column":474}},{"source":"calculatePolygons.js","original":{"line":37,"column":0},"generated":{"line":1,"column":480}},{"source":"calculatePolygons.js","name":"coordinateIsIn","original":{"line":37,"column":9},"generated":{"line":1,"column":489}},{"source":"calculatePolygons.js","name":"coordinate","original":{"line":37,"column":24},"generated":{"line":1,"column":491}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":37,"column":36},"generated":{"line":1,"column":493}},{"source":"calculatePolygons.js","name":"index","original":{"line":38,"column":8},"generated":{"line":1,"column":496}},{"source":"calculatePolygons.js","name":"index","original":{"line":38,"column":8},"generated":{"line":1,"column":500}},{"source":"calculatePolygons.js","original":{"line":38,"column":17},"generated":{"line":1,"column":503}},{"source":"calculatePolygons.js","name":"index","original":{"line":45,"column":11},"generated":{"line":1,"column":505}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":39,"column":4},"generated":{"line":1,"column":512}},{"source":"calculatePolygons.js","name":"forEach","original":{"line":39,"column":21},"generated":{"line":1,"column":514}},{"source":"calculatePolygons.js","original":{"line":39,"column":29},"generated":{"line":1,"column":522}},{"source":"calculatePolygons.js","name":"polygon","original":{"line":39,"column":30},"generated":{"line":1,"column":531}},{"source":"calculatePolygons.js","name":"i","original":{"line":39,"column":39},"generated":{"line":1,"column":533}},{"source":"calculatePolygons.js","name":"polygon","original":{"line":40,"column":12},"generated":{"line":1,"column":536}},{"source":"calculatePolygons.js","name":"includes","original":{"line":40,"column":20},"generated":{"line":1,"column":538}},{"source":"calculatePolygons.js","name":"coordinate","original":{"line":40,"column":29},"generated":{"line":1,"column":547}},{"source":"calculatePolygons.js","name":"index","original":{"line":41,"column":12},"generated":{"line":1,"column":552}},{"source":"calculatePolygons.js","name":"i","original":{"line":41,"column":20},"generated":{"line":1,"column":554}},{"source":"calculatePolygons.js","name":"index","original":{"line":45,"column":11},"generated":{"line":1,"column":559}},{"source":"calculatePolygons.js","original":{"line":48,"column":0},"generated":{"line":1,"column":561}},{"source":"calculatePolygons.js","name":"groupCoordinatesByDistance","original":{"line":48,"column":9},"generated":{"line":1,"column":570}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":48,"column":36},"generated":{"line":1,"column":572}},{"source":"calculatePolygons.js","name":"allowedDistance","original":{"line":48,"column":49},"generated":{"line":1,"column":574}},{"source":"calculatePolygons.js","original":{"line":50,"column":9},"generated":{"line":1,"column":577}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":49,"column":8},"generated":{"line":1,"column":581}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":49,"column":8},"generated":{"line":1,"column":585}},{"source":"calculatePolygons.js","original":{"line":49,"column":27},"generated":{"line":1,"column":587}},{"source":"calculatePolygons.js","name":"i","original":{"line":50,"column":13},"generated":{"line":1,"column":590}},{"source":"calculatePolygons.js","original":{"line":50,"column":17},"generated":{"line":1,"column":592}},{"source":"calculatePolygons.js","name":"i","original":{"line":50,"column":20},"generated":{"line":1,"column":594}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":50,"column":24},"generated":{"line":1,"column":596}},{"source":"calculatePolygons.js","name":"length","original":{"line":50,"column":36},"generated":{"line":1,"column":598}},{"source":"calculatePolygons.js","name":"i","original":{"line":50,"column":44},"generated":{"line":1,"column":605}},{"source":"calculatePolygons.js","original":{"line":50,"column":49},"generated":{"line":1,"column":609}},{"source":"calculatePolygons.js","name":"c","original":{"line":51,"column":12},"generated":{"line":1,"column":610}},{"source":"calculatePolygons.js","name":"c","original":{"line":51,"column":12},"generated":{"line":1,"column":614}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":51,"column":16},"generated":{"line":1,"column":616}},{"source":"calculatePolygons.js","name":"iPolygonIndex","original":{"line":52,"column":12},"generated":{"line":1,"column":618}},{"source":"calculatePolygons.js","name":"coordinateIsIn","original":{"line":52,"column":28},"generated":{"line":1,"column":620}},{"source":"calculatePolygons.js","name":"c","original":{"line":52,"column":43},"generated":{"line":1,"column":622}},{"source":"calculatePolygons.js","name":"i","original":{"line":52,"column":45},"generated":{"line":1,"column":624}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":52,"column":49},"generated":{"line":1,"column":627}},{"source":"calculatePolygons.js","name":"iPolygonIndex","original":{"line":53,"column":12},"generated":{"line":1,"column":630}},{"source":"calculatePolygons.js","original":{"line":53,"column":28},"generated":{"line":1,"column":632}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":54,"column":12},"generated":{"line":1,"column":636}},{"source":"calculatePolygons.js","name":"push","original":{"line":54,"column":29},"generated":{"line":1,"column":638}},{"source":"calculatePolygons.js","original":{"line":54,"column":34},"generated":{"line":1,"column":643}},{"source":"calculatePolygons.js","name":"c","original":{"line":54,"column":35},"generated":{"line":1,"column":644}},{"source":"calculatePolygons.js","name":"i","original":{"line":54,"column":37},"generated":{"line":1,"column":646}},{"source":"calculatePolygons.js","name":"iPolygonIndex","original":{"line":55,"column":12},"generated":{"line":1,"column":651}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":55,"column":28},"generated":{"line":1,"column":653}},{"source":"calculatePolygons.js","name":"length","original":{"line":55,"column":45},"generated":{"line":1,"column":655}},{"source":"calculatePolygons.js","original":{"line":55,"column":54},"generated":{"line":1,"column":662}},{"source":"calculatePolygons.js","original":{"line":57,"column":13},"generated":{"line":1,"column":665}},{"source":"calculatePolygons.js","original":{"line":57,"column":13},"generated":{"line":1,"column":669}},{"source":"calculatePolygons.js","name":"j","original":{"line":57,"column":17},"generated":{"line":1,"column":673}},{"source":"calculatePolygons.js","original":{"line":57,"column":21},"generated":{"line":1,"column":675}},{"source":"calculatePolygons.js","name":"j","original":{"line":57,"column":24},"generated":{"line":1,"column":677}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":57,"column":28},"generated":{"line":1,"column":679}},{"source":"calculatePolygons.js","name":"length","original":{"line":57,"column":40},"generated":{"line":1,"column":681}},{"source":"calculatePolygons.js","name":"j","original":{"line":57,"column":48},"generated":{"line":1,"column":688}},{"source":"calculatePolygons.js","original":{"line":57,"column":53},"generated":{"line":1,"column":692}},{"source":"calculatePolygons.js","original":{"line":58,"column":16},"generated":{"line":1,"column":693}},{"source":"calculatePolygons.js","name":"i","original":{"line":58,"column":18},"generated":{"line":1,"column":696}},{"source":"calculatePolygons.js","name":"j","original":{"line":58,"column":24},"generated":{"line":1,"column":700}},{"source":"calculatePolygons.js","name":"distance","original":{"line":60,"column":20},"generated":{"line":1,"column":702}},{"source":"calculatePolygons.js","name":"measure","original":{"line":59,"column":31},"generated":{"line":1,"column":705}},{"source":"calculatePolygons.js","name":"c","original":{"line":59,"column":39},"generated":{"line":1,"column":707}},{"source":"calculatePolygons.js","name":"i","original":{"line":59,"column":41},"generated":{"line":1,"column":709}},{"source":"calculatePolygons.js","name":"location","original":{"line":59,"column":44},"generated":{"line":1,"column":712}},{"source":"calculatePolygons.js","name":"c","original":{"line":59,"column":54},"generated":{"line":1,"column":721}},{"source":"calculatePolygons.js","name":"j","original":{"line":59,"column":56},"generated":{"line":1,"column":723}},{"source":"calculatePolygons.js","name":"location","original":{"line":59,"column":59},"generated":{"line":1,"column":726}},{"source":"calculatePolygons.js","name":"allowedDistance","original":{"line":60,"column":32},"generated":{"line":1,"column":737}},{"source":"calculatePolygons.js","original":{"line":60,"column":49},"generated":{"line":1,"column":739}},{"source":"calculatePolygons.js","name":"jPolygonIndex","original":{"line":61,"column":24},"generated":{"line":1,"column":740}},{"source":"calculatePolygons.js","name":"jPolygonIndex","original":{"line":61,"column":24},"generated":{"line":1,"column":744}},{"source":"calculatePolygons.js","name":"coordinateIsIn","original":{"line":61,"column":40},"generated":{"line":1,"column":746}},{"source":"calculatePolygons.js","name":"c","original":{"line":61,"column":55},"generated":{"line":1,"column":748}},{"source":"calculatePolygons.js","name":"j","original":{"line":61,"column":57},"generated":{"line":1,"column":750}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":61,"column":61},"generated":{"line":1,"column":753}},{"source":"calculatePolygons.js","name":"jPolygonIndex","original":{"line":62,"column":24},"generated":{"line":1,"column":756}},{"source":"calculatePolygons.js","name":"jPolygonIndex","original":{"line":62,"column":24},"generated":{"line":1,"column":759}},{"source":"calculatePolygons.js","original":{"line":62,"column":40},"generated":{"line":1,"column":761}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":63,"column":24},"generated":{"line":1,"column":763}},{"source":"calculatePolygons.js","name":"iPolygonIndex","original":{"line":63,"column":41},"generated":{"line":1,"column":765}},{"source":"calculatePolygons.js","name":"push","original":{"line":63,"column":56},"generated":{"line":1,"column":768}},{"source":"calculatePolygons.js","name":"c","original":{"line":63,"column":61},"generated":{"line":1,"column":773}},{"source":"calculatePolygons.js","name":"j","original":{"line":63,"column":63},"generated":{"line":1,"column":775}},{"source":"calculatePolygons.js","original":{"line":64,"column":27},"generated":{"line":1,"column":784}},{"source":"calculatePolygons.js","name":"jPolygonIndex","original":{"line":64,"column":31},"generated":{"line":1,"column":787}},{"source":"calculatePolygons.js","name":"iPolygonIndex","original":{"line":64,"column":49},"generated":{"line":1,"column":791}},{"source":"calculatePolygons.js","original":{"line":64,"column":64},"generated":{"line":1,"column":793}},{"source":"calculatePolygons.js","name":"newArr","original":{"line":65,"column":28},"generated":{"line":1,"column":794}},{"source":"calculatePolygons.js","name":"newArr","original":{"line":65,"column":28},"generated":{"line":1,"column":798}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":65,"column":37},"generated":{"line":1,"column":800}},{"source":"calculatePolygons.js","name":"iPolygonIndex","original":{"line":65,"column":54},"generated":{"line":1,"column":802}},{"source":"calculatePolygons.js","name":"concat","original":{"line":65,"column":69},"generated":{"line":1,"column":805}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":65,"column":76},"generated":{"line":1,"column":812}},{"source":"calculatePolygons.js","name":"jPolygonIndex","original":{"line":65,"column":93},"generated":{"line":1,"column":814}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":66,"column":24},"generated":{"line":1,"column":818}},{"source":"calculatePolygons.js","name":"splice","original":{"line":66,"column":41},"generated":{"line":1,"column":820}},{"source":"calculatePolygons.js","name":"iPolygonIndex","original":{"line":66,"column":48},"generated":{"line":1,"column":827}},{"source":"calculatePolygons.js","original":{"line":66,"column":63},"generated":{"line":1,"column":829}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":67,"column":24},"generated":{"line":1,"column":832}},{"source":"calculatePolygons.js","name":"splice","original":{"line":67,"column":41},"generated":{"line":1,"column":834}},{"source":"calculatePolygons.js","name":"jPolygonIndex","original":{"line":67,"column":48},"generated":{"line":1,"column":841}},{"source":"calculatePolygons.js","original":{"line":67,"column":63},"generated":{"line":1,"column":843}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":68,"column":24},"generated":{"line":1,"column":846}},{"source":"calculatePolygons.js","name":"push","original":{"line":68,"column":41},"generated":{"line":1,"column":848}},{"source":"calculatePolygons.js","name":"newArr","original":{"line":68,"column":46},"generated":{"line":1,"column":853}},{"source":"calculatePolygons.js","name":"jPolygonIndex","original":{"line":70,"column":24},"generated":{"line":1,"column":856}},{"source":"calculatePolygons.js","name":"iPolygonIndex","original":{"line":69,"column":24},"generated":{"line":1,"column":858}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":69,"column":40},"generated":{"line":1,"column":860}},{"source":"calculatePolygons.js","name":"length","original":{"line":69,"column":57},"generated":{"line":1,"column":862}},{"source":"calculatePolygons.js","original":{"line":69,"column":66},"generated":{"line":1,"column":869}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":76,"column":11},"generated":{"line":1,"column":874}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":76,"column":11},"generated":{"line":1,"column":881}},{"source":"calculatePolygons.js","original":{"line":79,"column":0},"generated":{"line":1,"column":883}},{"source":"calculatePolygons.js","name":"getCoordinatesInXY","original":{"line":79,"column":9},"generated":{"line":1,"column":892}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":79,"column":28},"generated":{"line":1,"column":894}},{"source":"calculatePolygons.js","name":"coordinatesXY","original":{"line":80,"column":8},"generated":{"line":1,"column":897}},{"source":"calculatePolygons.js","name":"coordinatesXY","original":{"line":80,"column":8},"generated":{"line":1,"column":901}},{"source":"calculatePolygons.js","original":{"line":80,"column":24},"generated":{"line":1,"column":903}},{"source":"calculatePolygons.js","name":"coordinatesXY","original":{"line":87,"column":11},"generated":{"line":1,"column":906}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":81,"column":4},"generated":{"line":1,"column":913}},{"source":"calculatePolygons.js","name":"forEach","original":{"line":81,"column":16},"generated":{"line":1,"column":915}},{"source":"calculatePolygons.js","original":{"line":81,"column":24},"generated":{"line":1,"column":923}},{"source":"calculatePolygons.js","name":"c","original":{"line":81,"column":24},"generated":{"line":1,"column":932}},{"source":"calculatePolygons.js","name":"coordinatesXY","original":{"line":82,"column":8},"generated":{"line":1,"column":935}},{"source":"calculatePolygons.js","name":"push","original":{"line":82,"column":22},"generated":{"line":1,"column":937}},{"source":"calculatePolygons.js","original":{"line":82,"column":27},"generated":{"line":1,"column":942}},{"source":"calculatePolygons.js","name":"x","original":{"line":83,"column":12},"generated":{"line":1,"column":943}},{"source":"calculatePolygons.js","name":"c","original":{"line":83,"column":15},"generated":{"line":1,"column":945}},{"source":"calculatePolygons.js","name":"location","original":{"line":83,"column":17},"generated":{"line":1,"column":947}},{"source":"calculatePolygons.js","name":"lat","original":{"line":83,"column":26},"generated":{"line":1,"column":956}},{"source":"calculatePolygons.js","name":"y","original":{"line":84,"column":12},"generated":{"line":1,"column":960}},{"source":"calculatePolygons.js","name":"c","original":{"line":84,"column":15},"generated":{"line":1,"column":962}},{"source":"calculatePolygons.js","name":"location","original":{"line":84,"column":17},"generated":{"line":1,"column":964}},{"source":"calculatePolygons.js","name":"lng","original":{"line":84,"column":26},"generated":{"line":1,"column":973}},{"source":"calculatePolygons.js","name":"coordinatesXY","original":{"line":87,"column":11},"generated":{"line":1,"column":981}},{"source":"calculatePolygons.js","original":{"line":90,"column":0},"generated":{"line":1,"column":983}},{"source":"calculatePolygons.js","name":"getXYCoordinatesInLatLng","original":{"line":90,"column":9},"generated":{"line":1,"column":992}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":90,"column":34},"generated":{"line":1,"column":994}},{"source":"calculatePolygons.js","name":"coordinatesLatLng","original":{"line":91,"column":8},"generated":{"line":1,"column":997}},{"source":"calculatePolygons.js","name":"coordinatesLatLng","original":{"line":91,"column":8},"generated":{"line":1,"column":1001}},{"source":"calculatePolygons.js","original":{"line":91,"column":28},"generated":{"line":1,"column":1003}},{"source":"calculatePolygons.js","name":"coordinatesLatLng","original":{"line":98,"column":11},"generated":{"line":1,"column":1006}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":92,"column":4},"generated":{"line":1,"column":1013}},{"source":"calculatePolygons.js","name":"forEach","original":{"line":92,"column":16},"generated":{"line":1,"column":1015}},{"source":"calculatePolygons.js","original":{"line":92,"column":24},"generated":{"line":1,"column":1023}},{"source":"calculatePolygons.js","name":"c","original":{"line":92,"column":24},"generated":{"line":1,"column":1032}},{"source":"calculatePolygons.js","name":"coordinatesLatLng","original":{"line":93,"column":8},"generated":{"line":1,"column":1035}},{"source":"calculatePolygons.js","name":"push","original":{"line":93,"column":26},"generated":{"line":1,"column":1037}},{"source":"calculatePolygons.js","original":{"line":93,"column":31},"generated":{"line":1,"column":1042}},{"source":"calculatePolygons.js","name":"lat","original":{"line":94,"column":12},"generated":{"line":1,"column":1043}},{"source":"calculatePolygons.js","name":"c","original":{"line":94,"column":17},"generated":{"line":1,"column":1047}},{"source":"calculatePolygons.js","name":"x","original":{"line":94,"column":19},"generated":{"line":1,"column":1049}},{"source":"calculatePolygons.js","name":"lng","original":{"line":95,"column":12},"generated":{"line":1,"column":1051}},{"source":"calculatePolygons.js","name":"c","original":{"line":95,"column":17},"generated":{"line":1,"column":1055}},{"source":"calculatePolygons.js","name":"y","original":{"line":95,"column":19},"generated":{"line":1,"column":1057}},{"source":"calculatePolygons.js","name":"coordinatesLatLng","original":{"line":98,"column":11},"generated":{"line":1,"column":1063}},{"source":"calculatePolygons.js","original":{"line":101,"column":0},"generated":{"line":1,"column":1065}},{"source":"calculatePolygons.js","name":"calculatePolygon","original":{"line":101,"column":9},"generated":{"line":1,"column":1074}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":101,"column":26},"generated":{"line":1,"column":1076}},{"source":"calculatePolygons.js","name":"coordinatesXY","original":{"line":102,"column":8},"generated":{"line":1,"column":1079}},{"source":"calculatePolygons.js","name":"coordinatesXY","original":{"line":102,"column":8},"generated":{"line":1,"column":1083}},{"source":"calculatePolygons.js","name":"getCoordinatesInXY","original":{"line":102,"column":24},"generated":{"line":1,"column":1085}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":102,"column":43},"generated":{"line":1,"column":1087}},{"source":"calculatePolygons.js","name":"polygonLatLng","original":{"line":105,"column":11},"generated":{"line":1,"column":1090}},{"source":"calculatePolygons.js","name":"getXYCoordinatesInLatLng","original":{"line":104,"column":24},"generated":{"line":1,"column":1097}},{"source":"calculatePolygons.js","name":"convexhull","original":{"line":103,"column":20},"generated":{"line":1,"column":1099}},{"source":"calculatePolygons.js","name":"makeHull","original":{"line":103,"column":31},"generated":{"line":1,"column":1101}},{"source":"calculatePolygons.js","name":"coordinatesXY","original":{"line":103,"column":40},"generated":{"line":1,"column":1110}},{"source":"calculatePolygons.js","original":{"line":108,"column":0},"generated":{"line":1,"column":1114}},{"source":"calculatePolygons.js","name":"calculatePolygonsFromCoordinateGroups","original":{"line":108,"column":9},"generated":{"line":1,"column":1123}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":108,"column":47},"generated":{"line":1,"column":1125}},{"source":"calculatePolygons.js","name":"polygons","original":{"line":109,"column":8},"generated":{"line":1,"column":1128}},{"source":"calculatePolygons.js","name":"polygons","original":{"line":109,"column":8},"generated":{"line":1,"column":1132}},{"source":"calculatePolygons.js","original":{"line":109,"column":19},"generated":{"line":1,"column":1134}},{"source":"calculatePolygons.js","name":"polygons","original":{"line":113,"column":11},"generated":{"line":1,"column":1137}},{"source":"calculatePolygons.js","name":"coordinateGroups","original":{"line":110,"column":4},"generated":{"line":1,"column":1144}},{"source":"calculatePolygons.js","name":"forEach","original":{"line":110,"column":21},"generated":{"line":1,"column":1146}},{"source":"calculatePolygons.js","original":{"line":110,"column":29},"generated":{"line":1,"column":1154}},{"source":"calculatePolygons.js","name":"group","original":{"line":110,"column":29},"generated":{"line":1,"column":1163}},{"source":"calculatePolygons.js","name":"polygons","original":{"line":111,"column":8},"generated":{"line":1,"column":1166}},{"source":"calculatePolygons.js","name":"push","original":{"line":111,"column":17},"generated":{"line":1,"column":1168}},{"source":"calculatePolygons.js","name":"calculatePolygon","original":{"line":111,"column":22},"generated":{"line":1,"column":1173}},{"source":"calculatePolygons.js","name":"group","original":{"line":111,"column":39},"generated":{"line":1,"column":1175}},{"source":"calculatePolygons.js","name":"polygons","original":{"line":113,"column":11},"generated":{"line":1,"column":1181}},{"source":"calculatePolygons.js","original":{"line":116,"column":0},"generated":{"line":1,"column":1183}},{"source":"calculatePolygons.js","name":"getPolygon","original":{"line":116,"column":9},"generated":{"line":1,"column":1192}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":116,"column":20},"generated":{"line":1,"column":1194}},{"source":"calculatePolygons.js","name":"allowedDistance","original":{"line":116,"column":33},"generated":{"line":1,"column":1196}},{"source":"calculatePolygons.js","name":"polygons","original":{"line":120,"column":11},"generated":{"line":1,"column":1199}},{"source":"calculatePolygons.js","name":"calculatePolygonsFromCoordinateGroups","original":{"line":119,"column":19},"generated":{"line":1,"column":1206}},{"source":"calculatePolygons.js","name":"groupCoordinatesByDistance","original":{"line":118,"column":17},"generated":{"line":1,"column":1208}},{"source":"calculatePolygons.js","name":"JSON","original":{"line":117,"column":25},"generated":{"line":1,"column":1210}},{"source":"calculatePolygons.js","name":"parse","original":{"line":117,"column":30},"generated":{"line":1,"column":1215}},{"source":"calculatePolygons.js","name":"JSON","original":{"line":117,"column":36},"generated":{"line":1,"column":1221}},{"source":"calculatePolygons.js","name":"stringify","original":{"line":117,"column":41},"generated":{"line":1,"column":1226}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":117,"column":51},"generated":{"line":1,"column":1236}},{"source":"calculatePolygons.js","name":"allowedDistance","original":{"line":118,"column":60},"generated":{"line":1,"column":1240}},{"source":"calculatePolygons.js","original":{"line":125,"column":0},"generated":{"line":1,"column":1244}},{"source":"calculatePolygons.js","name":"run","original":{"line":125,"column":9},"generated":{"line":1,"column":1253}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":125,"column":13},"generated":{"line":1,"column":1255}},{"source":"calculatePolygons.js","name":"allowedDistance","original":{"line":125,"column":26},"generated":{"line":1,"column":1257}},{"source":"calculatePolygons.js","name":"coordinatesByTime","original":{"line":126,"column":8},"generated":{"line":1,"column":1260}},{"source":"calculatePolygons.js","name":"coordinatesByTime","original":{"line":126,"column":8},"generated":{"line":1,"column":1264}},{"source":"calculatePolygons.js","name":"splitByTimestamp","original":{"line":126,"column":28},"generated":{"line":1,"column":1266}},{"source":"calculatePolygons.js","name":"coordinates","original":{"line":126,"column":45},"generated":{"line":1,"column":1268}},{"source":"calculatePolygons.js","name":"polygons","original":{"line":127,"column":8},"generated":{"line":1,"column":1271}},{"source":"calculatePolygons.js","original":{"line":127,"column":19},"generated":{"line":1,"column":1273}},{"source":"calculatePolygons.js","original":{"line":128,"column":9},"generated":{"line":1,"column":1276}},{"source":"calculatePolygons.js","original":{"line":128,"column":9},"generated":{"line":1,"column":1280}},{"source":"calculatePolygons.js","name":"key","original":{"line":128,"column":13},"generated":{"line":1,"column":1284}},{"source":"calculatePolygons.js","name":"coordinatesByTime","original":{"line":128,"column":20},"generated":{"line":1,"column":1289}},{"source":"calculatePolygons.js","name":"polygons","original":{"line":129,"column":8},"generated":{"line":1,"column":1291}},{"source":"calculatePolygons.js","name":"key","original":{"line":129,"column":17},"generated":{"line":1,"column":1293}},{"source":"calculatePolygons.js","name":"getPolygon","original":{"line":129,"column":24},"generated":{"line":1,"column":1296}},{"source":"calculatePolygons.js","name":"coordinatesByTime","original":{"line":129,"column":35},"generated":{"line":1,"column":1298}},{"source":"calculatePolygons.js","name":"key","original":{"line":129,"column":53},"generated":{"line":1,"column":1300}},{"source":"calculatePolygons.js","name":"allowedDistance","original":{"line":129,"column":59},"generated":{"line":1,"column":1303}},{"source":"calculatePolygons.js","name":"polygons","original":{"line":131,"column":11},"generated":{"line":1,"column":1306}},{"source":"calculatePolygons.js","name":"polygons","original":{"line":131,"column":11},"generated":{"line":1,"column":1313}},{"source":"calculatePolygons.js","name":"module","original":{"line":134,"column":0},"generated":{"line":1,"column":1315}},{"source":"calculatePolygons.js","name":"exports","original":{"line":134,"column":7},"generated":{"line":1,"column":1322}},{"source":"calculatePolygons.js","name":"run","original":{"line":134,"column":17},"generated":{"line":1,"column":1330}}],"sources":{"calculatePolygons.js":"const convexhull = require('./convec_hull')\n\n\nfunction splitByTimestamp(coordinates) {\n    let coordinatesByTime = {}\n    coordinates.forEach(c => {\n        let time = new Date(c.timestamp)\n        let h = time.getHours()\n        let timeName = h.toString() + ':00-' + h.toString() + ':59'\n        if (!coordinatesByTime[timeName]) {\n            coordinatesByTime[timeName] = []\n        }\n        coordinatesByTime[timeName].push(c)\n    });\n    return coordinatesByTime\n}\n\nfunction measure(coord1, coord2) {  // generally used geo measurement function\n    let lat1 = coord1.lat\n    let lon1 = coord1.lng\n    let lat2 = coord2.lat\n    let lon2 = coord2.lng\n\n    var R = 6378.137; // Radius of earth in KM\n    var dLat = lat2 * Math.PI / 180 - lat1 * Math.PI / 180;\n    var dLon = lon2 * Math.PI / 180 - lon1 * Math.PI / 180;\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n        Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    var d = R * c;\n    return d * 1000; // meters\n}\n\n\n\nfunction coordinateIsIn(coordinate, coordinateGroups) {\n    let index = -1\n    coordinateGroups.forEach((polygon, i) => {\n        if (polygon.includes(coordinate)) {\n            index = i\n            return\n        }\n    });\n    return index\n}\n\nfunction groupCoordinatesByDistance(coordinates, allowedDistance) {\n    let coordinateGroups = []\n    for (let i = 0; i < coordinates.length; i++) {\n        let c = coordinates\n        let iPolygonIndex = coordinateIsIn(c[i], coordinateGroups)\n        if (iPolygonIndex < 0) {\n            coordinateGroups.push([c[i]])\n            iPolygonIndex = coordinateGroups.length - 1\n        }\n        for (let j = 0; j < coordinates.length; j++) {\n            if (!(i === j)) {\n                let distance = measure(c[i].location, c[j].location)\n                if (distance <= allowedDistance) {\n                    let jPolygonIndex = coordinateIsIn(c[j], coordinateGroups)\n                    if (jPolygonIndex < 0) {\n                        coordinateGroups[iPolygonIndex].push(c[j])\n                    } else if (jPolygonIndex !== iPolygonIndex) {\n                        let newArr = coordinateGroups[iPolygonIndex].concat(coordinateGroups[jPolygonIndex])\n                        coordinateGroups.splice(iPolygonIndex, 1)\n                        coordinateGroups.splice(jPolygonIndex, 1)\n                        coordinateGroups.push(newArr)\n                        iPolygonIndex = coordinateGroups.length - 1\n                        jPolygonIndex = iPolygonIndex\n                    }\n                }\n            }\n        }\n    }\n    return coordinateGroups\n}\n\nfunction getCoordinatesInXY(coordinates) {\n    let coordinatesXY = []\n    coordinates.forEach(c => {\n        coordinatesXY.push({\n            x: c.location.lat,\n            y: c.location.lng\n        })\n    });\n    return coordinatesXY\n}\n\nfunction getXYCoordinatesInLatLng(coordinates) {\n    let coordinatesLatLng = []\n    coordinates.forEach(c => {\n        coordinatesLatLng.push({\n            lat: c.x,\n            lng: c.y\n        })\n    });\n    return coordinatesLatLng\n}\n\nfunction calculatePolygon(coordinates) {\n    let coordinatesXY = getCoordinatesInXY(coordinates)\n    let polygonXY = convexhull.makeHull(coordinatesXY)\n    let polygonLatLng = getXYCoordinatesInLatLng(polygonXY)\n    return polygonLatLng\n}\n\nfunction calculatePolygonsFromCoordinateGroups(coordinateGroups) {\n    let polygons = []\n    coordinateGroups.forEach(group => {\n        polygons.push(calculatePolygon(group))\n    });\n    return polygons\n}\n\nfunction getPolygon(coordinates, allowedDistance) {\n    let newCoordinates = JSON.parse(JSON.stringify(coordinates))\n    let groups = groupCoordinatesByDistance(newCoordinates, allowedDistance)\n    let polygons = calculatePolygonsFromCoordinateGroups(groups)\n    return polygons\n}\n\n\n\nfunction run(coordinates, allowedDistance) {\n    let coordinatesByTime = splitByTimestamp(coordinates)\n    let polygons = {}\n    for (let key in coordinatesByTime) {\n        polygons[key] = getPolygon(coordinatesByTime[key], allowedDistance)\n    }\n    return polygons\n}\n\nmodule.exports = run"},"lineCount":null}},"error":null,"hash":"2ca8e126f7ac7b14fd2ac0fd2620884c","cacheData":{"env":{}}}